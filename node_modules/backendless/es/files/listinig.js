"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.listing = listing;

var _utils = _interopRequireDefault(require("../utils"));

var _async = _interopRequireDefault(require("../request/async"));

function listing(path, pattern, sub, pagesize, offset, asyncHandler) {
  if (offset instanceof _async["default"]) {
    asyncHandler = offset;
    offset = undefined;
  } else if (pagesize instanceof _async["default"]) {
    asyncHandler = pagesize;
    pagesize = undefined;
    offset = undefined;
  } else if (sub instanceof _async["default"]) {
    asyncHandler = sub;
    sub = undefined;
    pagesize = undefined;
    offset = undefined;
  } else if (pattern instanceof _async["default"]) {
    asyncHandler = pattern;
    pattern = undefined;
    sub = undefined;
    pagesize = undefined;
    offset = undefined;
  }

  var query = {};

  if (_utils["default"].isString(pattern)) {
    query.pattern = pattern;
  }

  if (_utils["default"].isBoolean(sub)) {
    query.sub = sub;
  }

  if (_utils["default"].isNumber(pagesize)) {
    query.pagesize = pagesize;
  }

  if (_utils["default"].isNumber(offset)) {
    query.offset = offset;
  }

  return this.app.request.get({
    url: this.app.urls.filePath(path),
    query: query,
    isAsync: !!asyncHandler,
    asyncHandler: asyncHandler
  });
}