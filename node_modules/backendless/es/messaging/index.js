"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _applyDecoratedDescriptor2 = _interopRequireDefault(require("@babel/runtime/helpers/applyDecoratedDescriptor"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _utils = _interopRequireDefault(require("../utils"));

var _decorators = require("../decorators");

var _channel = _interopRequireDefault(require("./channel"));

var _helpers = require("./helpers");

var _methods = require("./methods");

var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _obj, _init, _init2, _init3, _init4, _init5, _init6, _init7, _init8;

var Messaging = /*#__PURE__*/function () {
  function Messaging(app) {
    (0, _classCallCheck2["default"])(this, Messaging);
    this.app = app;
    this.Bodyparts = _helpers.Bodyparts;
    this.PublishOptions = _helpers.PublishOptions;
    this.DeliveryOptions = _helpers.DeliveryOptions;
    this.PublishOptionsHeaders = _helpers.PublishOptionsHeaders;
    this.EmailEnvelope = _helpers.EmailEnvelope;
    /** @deprecated */

    this.SubscriptionOptions = _helpers.SubscriptionOptions;
  }

  (0, _createClass2["default"])(Messaging, [{
    key: "subscribe",
    value: function subscribe(channelName) {
      if (!channelName || typeof channelName !== 'string') {
        throw new Error('"channelName" must be non empty string');
      }

      if (channelName.indexOf('/') >= 0) {
        throw new Error('"channelName" can not contains slash chars');
      }

      return new _channel["default"]({
        name: channelName.trim()
      }, this.app);
    }
  }]);
  return Messaging;
}();

(0, _extends2["default"])(Messaging.prototype, (_dec = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.publish'), _dec2 = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.sendEmail'), _dec3 = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.sendEmailFromTemplate'), _dec4 = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.cancel'), _dec5 = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.registerDevice'), _dec6 = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.getRegistrations'), _dec7 = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.unregisterDevice'), _dec8 = (0, _decorators.deprecated)('Backendless.Messaging', 'Backendless.Messaging.getMessageStatus'), (_obj = {
  publishSync: _utils["default"]["synchronized"](_methods.publish),
  publish: _utils["default"].promisified(_methods.publish),
  pushWithTemplate: _utils["default"].promisified(_methods.pushWithTemplate),
  sendEmailSync: _utils["default"]["synchronized"](_methods.sendEmail),
  sendEmail: _utils["default"].promisified(_methods.sendEmail),
  sendEmailFromTemplateSync: _utils["default"]["synchronized"](_methods.sendEmailFromTemplate),
  sendEmailFromTemplate: _utils["default"].promisified(_methods.sendEmailFromTemplate),
  cancelSync: _utils["default"]["synchronized"](_methods.cancel),
  cancel: _utils["default"].promisified(_methods.cancel),
  registerDeviceSync: _utils["default"]["synchronized"](_methods.registerDevice),
  registerDevice: _utils["default"].promisified(_methods.registerDevice),
  getRegistrationsSync: _utils["default"]["synchronized"](_methods.getRegistrations),
  getRegistrations: _utils["default"].promisified(_methods.getRegistrations),
  unregisterDeviceSync: _utils["default"]["synchronized"](_methods.unregisterDevice),
  unregisterDevice: _utils["default"].promisified(_methods.unregisterDevice),
  getMessageStatusSync: _utils["default"]["synchronized"](_methods.getMessageStatus),
  getMessageStatus: _utils["default"].promisified(_methods.getMessageStatus),
  getPushTemplates: _utils["default"].promisified(_methods.getPushTemplates)
}, ((0, _applyDecoratedDescriptor2["default"])(_obj, "publishSync", [_dec], (_init = Object.getOwnPropertyDescriptor(_obj, "publishSync"), _init = _init ? _init.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init;
  }
}), _obj), (0, _applyDecoratedDescriptor2["default"])(_obj, "sendEmailSync", [_dec2], (_init2 = Object.getOwnPropertyDescriptor(_obj, "sendEmailSync"), _init2 = _init2 ? _init2.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init2;
  }
}), _obj), (0, _applyDecoratedDescriptor2["default"])(_obj, "sendEmailFromTemplateSync", [_dec3], (_init3 = Object.getOwnPropertyDescriptor(_obj, "sendEmailFromTemplateSync"), _init3 = _init3 ? _init3.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init3;
  }
}), _obj), (0, _applyDecoratedDescriptor2["default"])(_obj, "cancelSync", [_dec4], (_init4 = Object.getOwnPropertyDescriptor(_obj, "cancelSync"), _init4 = _init4 ? _init4.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init4;
  }
}), _obj), (0, _applyDecoratedDescriptor2["default"])(_obj, "registerDeviceSync", [_dec5], (_init5 = Object.getOwnPropertyDescriptor(_obj, "registerDeviceSync"), _init5 = _init5 ? _init5.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init5;
  }
}), _obj), (0, _applyDecoratedDescriptor2["default"])(_obj, "getRegistrationsSync", [_dec6], (_init6 = Object.getOwnPropertyDescriptor(_obj, "getRegistrationsSync"), _init6 = _init6 ? _init6.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init6;
  }
}), _obj), (0, _applyDecoratedDescriptor2["default"])(_obj, "unregisterDeviceSync", [_dec7], (_init7 = Object.getOwnPropertyDescriptor(_obj, "unregisterDeviceSync"), _init7 = _init7 ? _init7.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init7;
  }
}), _obj), (0, _applyDecoratedDescriptor2["default"])(_obj, "getMessageStatusSync", [_dec8], (_init8 = Object.getOwnPropertyDescriptor(_obj, "getMessageStatusSync"), _init8 = _init8 ? _init8.value : undefined, {
  enumerable: true,
  configurable: true,
  writable: true,
  initializer: function initializer() {
    return _init8;
  }
}), _obj)), _obj)));
var _default = Messaging;
exports["default"] = _default;