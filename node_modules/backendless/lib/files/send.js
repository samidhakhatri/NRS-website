"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.sendFile = sendFile;

var _utils = _interopRequireDefault(require("../utils"));

var sanitizeFileName = function sanitizeFileName(fileName) {
  return encodeURIComponent(fileName).replace(/'/g, '%27').replace(/"/g, '%22');
};

function sendFile(options) {
  var url = this.app.urls.filePath(options.path) + '/' + sanitizeFileName(options.fileName);
  var query = {};

  if (_utils["default"].isBoolean(options.overwrite)) {
    query.overwrite = options.overwrite;
  }

  return this.app.request.post({
    url: url,
    query: query,
    form: {
      file: options.file
    },
    asyncHandler: options.asyncHandler
  });
}