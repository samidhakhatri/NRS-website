{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8dbf51fa21f2c3dcaab5","webpack:///./src/utils.js","webpack:///external \"buffer\"","webpack:///./src/index.js","webpack:///./src/cache.js","webpack:///./src/event-emitter.js","webpack:///./src/qs.js","webpack:///external \"stream\"","webpack:///external \"url\"","webpack:///external \"https\"","webpack:///external \"http\"","webpack:///external \"form-data\""],"names":["castArray","Array","isArray","value","isObject","isFormData","constructor","toString","trim","indexOf","isStream","stream","require","Stream","qs","CONTENT_TYPE_HEADER","CACHE_FLUSH_INTERVAL","cache","Cache","ResponseError","response","error","parseError","message","code","status","headers","body","Error","res","statusText","parseBody","JSON","parse","e","parseHeaders","headersString","parsed","split","forEach","i","line","key","substr","val","sendXmlHttpRequest","path","method","Promise","sendRequest","resolve","reject","request","Request","XMLHttpRequest","open","toUpperCase","onload","handleLoadEvent","getAllResponseHeaders","responseText","onerror","handleErrorEvent","ontimeout","handleTimeout","Object","keys","setRequestHeader","send","sendNodeAPIRequest","encoding","u","form","https","protocol","options","host","hostname","port","_send","Buffer","httpClient","req","strings","buffers","bufferLength","statusCode","statusMessage","on","isBuffer","chunk","push","length","concat","join","pipe","write","end","getHeaders","getLength","err","isNaN","byteLength","checkStatus","REQUEST_EVENT","RESPONSE_EVENT","ERROR_EVENT","DONE_EVENT","tags","undefined","unwrap","cacheTTL","queryParams","headerName","set","FormData","module","exports","formData","formKey","formValue","hasOwnProperty","append","ttl","reset","deleteByTags","contentType","emit","queryString","stringify","cached","get","type","isJSON","unwrapBody","cacheResponse","flushCache","verbose","console","log","decodeURIComponent","then","result","catch","successHandler","errorHandler","promise","EventEmitter","defineProperty","sender","methods","DEFAULT_TTL","cacheItem","currentTime","Date","getTime","tagsMatches","a","b","RegExp","test","tagsContainMatches","find","aTag","bTag","flushInterval","map","Map","delete","flushTimer","setInterval","flush","bind","unref","now","events","eventName","callback","filter","c","args","tokens","obj","encodeURIComponent"],"mappings":"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","file":"backendless-request.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BackendlessRequest\"] = factory();\n\telse\n\t\troot[\"BackendlessRequest\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8dbf51fa21f2c3dcaab5","/**\n * Casts `value` as an array if it's not one.\n * Equvivalent to lodash/castArray\n */\nexport const castArray = value => {\n  return Array.isArray(value) ? value : [value]\n}\n\nexport const isObject = value => null != value && typeof value === 'object'\n\nexport const isFormData = value => {\n  return value && value.constructor && value.constructor.toString().trim().indexOf('function FormData') === 0\n}\n\nexport const isStream = value => {\n  const stream = require('stream')\n\n  return value instanceof stream.Stream\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"buffer\"\n// module id = 1\n// module chunks = 0","import Cache from './cache'\nimport EventEmitter from './event-emitter'\nimport * as qs from './qs'\nimport { castArray, isObject, isFormData, isStream } from './utils'\n\nconst CONTENT_TYPE_HEADER = 'Content-Type'\nconst CACHE_FLUSH_INTERVAL = 60000 //60 sec\n\nconst cache = new Cache(CACHE_FLUSH_INTERVAL)\n\nclass ResponseError extends Error {\n  constructor(response) {\n    super()\n\n    const error = parseError(response)\n\n    this.message = error.message || error\n    this.code = error.code\n\n    this.status = response.status\n    this.headers = response.headers\n    this.body = response.body\n  }\n}\n\nfunction parseError(res) {\n  if (res.status === 502) {\n    return 'No connection with server'\n  }\n\n  return res.body || `Status Code ${res.status} (${res.statusText})`\n}\n\nfunction parseBody(res) {\n  try {\n    return { ...res, body: JSON.parse(res.body) }\n  } catch (e) {\n    return res\n  }\n}\n\nfunction parseHeaders(headersString) {\n  const parsed = {}\n\n  if (!headersString) {\n    return parsed\n  }\n\n  headersString.split('\\n').forEach(line => {\n    const i = line.indexOf(':')\n    const key = line.substr(0, i).trim()\n    const val = line.substr(i + 1).trim()\n\n    if (key) {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val\n    }\n  })\n\n  return parsed\n}\n\nconst sendXmlHttpRequest = (path, method, headers, body) => {\n  return new Promise(function sendRequest(resolve, reject) {\n    let request = new Request.XMLHttpRequest()\n\n    request.open(method.toUpperCase(), path, true)\n\n    request.onload = function handleLoadEvent() {\n      const headers = parseHeaders(request.getAllResponseHeaders())\n      const { status, statusText, response, responseText } = request\n      const body = response || responseText\n\n      resolve({ status, statusText, headers, body })\n\n      request = null\n    }\n\n    request.onerror = function handleErrorEvent() {\n      reject(new Error('Network Error'))\n\n      request = null\n    }\n\n    request.ontimeout = function handleTimeout() {\n      reject(new Error('Connection aborted due to timeout'))\n\n      request = null\n    }\n\n    Object.keys(headers).forEach(key => {\n      request.setRequestHeader(key, headers[key])\n    })\n\n    request.send(body)\n  })\n}\n\nconst sendNodeAPIRequest = (path, method, headers, body, encoding) => {\n  return new Promise((resolve, reject) => {\n    const u = require('url').parse(path)\n    const form = isFormData(body) && body\n\n    const https = u.protocol === 'https:'\n    const options = {\n      host   : u.hostname,\n      port   : u.port || (https ? 443 : 80),\n      method : method,\n      path   : u.path,\n      headers: headers\n    }\n\n    const _send = () => {\n      const Buffer = require('buffer').Buffer\n      const httpClient = require(https ? 'https' : 'http')\n\n      const req = httpClient.request(options, res => {\n        const strings = []\n        const buffers = []\n        let bufferLength = 0\n        let body = ''\n\n        const { statusCode: status, statusMessage: statusText, headers } = res\n\n        res.on('data', chunk => {\n          if (!Buffer.isBuffer(chunk)) {\n            strings.push(chunk)\n\n          } else if (chunk.length) {\n            bufferLength += chunk.length\n            buffers.push(chunk)\n          }\n        })\n\n        res.on('end', () => {\n          if (bufferLength) {\n            body = Buffer.concat(buffers, bufferLength)\n\n            if (encoding != null) {\n              body = body.toString(encoding)\n            }\n\n          } else if (strings.length) {\n            body = strings.join()\n          }\n\n          resolve({ status, statusText, headers, body })\n        })\n\n        res.on('error', reject)\n      })\n\n      req.on('error', reject)\n\n      if (body) {\n        if (isStream(body)) {\n          body.pipe(req)\n          return\n        }\n\n        req.write(body)\n      }\n\n      req.end()\n    }\n\n    if (form) {\n      Object.assign(options.headers, form.getHeaders())\n\n      form.getLength(function(err, length) {\n        if (!err && !isNaN(length)) {\n          options.headers['content-length'] = length\n        }\n\n        _send()\n      })\n    } else {\n      if (body && !options.headers['content-length']) {\n        const Buffer = require('buffer').Buffer\n        options.headers['content-length'] = Buffer.byteLength(body)\n      }\n\n      _send()\n    }\n  })\n}\n\n/**\n * Checks if a network request came back fine, and throws an error if not\n *\n * @param  {object} response   A response from a network request\n *\n * @return {object|undefined} Returns either the response, or throws an error\n */\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response\n  }\n\n  throw new ResponseError(response)\n}\n\nconst REQUEST_EVENT = 'request'\nconst RESPONSE_EVENT = 'response'\nconst ERROR_EVENT = 'error'\nconst DONE_EVENT = 'done'\n\nclass Request extends EventEmitter {\n\n  constructor(path, method, body) {\n    super()\n\n    this.method = method\n    this.path = path\n    this.body = body\n    this.tags = undefined\n    this.unwrap = true\n    this.cacheTTL = 0\n    this.headers = {}\n    this.queryParams = {}\n    this.encoding = 'utf8'\n  }\n\n  /**\n   * Sets a header\n   *\n   * @param {String|Object} key or map of headers\n   * @param {String} [value]\n   * @returns {Request}\n   */\n  set(key, value) {\n    if (isObject(key)) {\n      for (const headerName in key) {\n        this.set(headerName, key[headerName])\n      }\n    } else if (typeof value !== 'undefined') {\n      this.headers[key] = value\n    }\n\n    return this\n  }\n\n  /**\n   * Which kind of tags this request affects.\n   * Used for cache validation.\n   * Non GET requests with defined tags, will clean all related to these tags caches\n   *\n   * @param {Array.<String>} tags\n   * @returns {Request}\n   */\n  cacheTags(...tags) {\n    this.tags = tags\n\n    return this\n  }\n\n  /**\n   * @param {Object} queryParams\n   * @returns {Request}\n   */\n  query(queryParams) {\n    Object.assign(this.queryParams, queryParams)\n\n    return this\n  }\n\n  form(form) {\n    if (form) {\n      const FormData = module.exports.FormData\n\n      if (form instanceof FormData) {\n        this.body = form\n      } else {\n        const formData = new FormData()\n\n        for (const formKey in form) {\n          if (formKey) {\n            castArray(form[formKey]).forEach(formValue => {\n              if (formValue && formValue.hasOwnProperty('value') && formValue.hasOwnProperty('options')) {\n                formData.append(formKey, formValue.value, formValue.options)\n              } else {\n                formData.append(formKey, formValue)\n              }\n            })\n          }\n        }\n\n        this.body = formData\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * Should we cache or use cached result\n   *\n   * @param {Number} ttl Time to live for cached response. 15 seconds by default\n   * @returns {Request}\n   */\n  useCache(ttl = 15000) {\n    this.cacheTTL = ttl\n\n    return this\n  }\n\n  /**\n   * Reset cache if passed TRUE and tags has been specified before\n   *\n   * @param {Boolean} reset - flag to reset cache or not\n   * @returns {Request}\n   */\n  resetCache(reset) {\n    if (reset && this.tags) {\n      cache.deleteByTags(this.tags)\n    }\n\n    return this\n  }\n\n  /**\n   * Shortcut for req.set('Content-Type', value)\n   *\n   * @param {String} contentType\n   * @returns {Request}\n   */\n  type(contentType) {\n    this.set(CONTENT_TYPE_HEADER, contentType)\n\n    return this\n  }\n\n  /**\n   * Should we unwrap the response and return only body. true by default\n   * @param {Boolean} unwrap\n   * @returns {Request}\n   */\n  unwrapBody(unwrap) {\n    this.unwrap = unwrap\n\n    return this\n  }\n\n  /**\n   * set encoding to response\n   * works only for Node js\n   *\n   * @param {String} encoding\n   * @returns {Request}\n   */\n  setEncoding(encoding) {\n    this.encoding = encoding\n\n    return this\n  }\n\n  /**\n   * Sends the requst\n   *\n   * @param {Object} body\n   * @returns {Promise}\n   */\n  send(body) {\n    this.emit(REQUEST_EVENT, this)\n\n    let path = this.path\n    const queryString = qs.stringify(this.queryParams)\n\n    if (queryString) {\n      path += '?' + queryString\n    }\n\n    if (this.cacheTTL) {\n      const cached = cache.get(path)\n\n      if (cached !== undefined) {\n        return Promise.resolve(cached)\n      }\n    }\n\n    const type = this.headers[CONTENT_TYPE_HEADER]\n\n    if (!type && isObject(body) && !isFormData(body)) {\n      this.type('application/json')\n    }\n\n    if (body) {\n      const isJSON = this.headers[CONTENT_TYPE_HEADER] === 'application/json'\n\n      body = (isJSON && typeof body !== 'string') ? JSON.stringify(body) : body\n    }\n\n    const unwrapBody = res => {\n      return this.unwrap ? res.body : res\n    }\n\n    /**\n     * Caches the response if required\n     */\n    const cacheResponse = res => {\n      if (this.cacheTTL) {\n        cache.set(path, res, this.tags, this.cacheTTL)\n      }\n\n      return res\n    }\n\n    /**\n     * Deletes all relevant to req.cacheTags keys from the cache if this request method is not GET\n     */\n    const flushCache = res => {\n      if (this.tags && this.method !== 'get') {\n        cache.deleteByTags(this.tags)\n      }\n\n      return res\n    }\n\n    if (Request.verbose) {\n      console.log(this.method.toUpperCase(), decodeURIComponent(path), body, this.headers)\n    }\n\n    const request = Request.send(path, this.method.toUpperCase(), this.headers, body, this.encoding)\n      .then(parseBody)\n      .then(checkStatus)\n      .then(unwrapBody)\n      .then(cacheResponse)\n      .then(flushCache)\n\n    request\n      .then(result => {\n        this.emit(RESPONSE_EVENT, result)\n        this.emit(DONE_EVENT, null, result)\n      })\n      .catch(error => {\n        this.emit(ERROR_EVENT, error)\n        this.emit(DONE_EVENT, error)\n      })\n\n    return request\n  }\n\n  /**\n   * If you are too lazy to use method 'send', don't use it and stay cool :)\n   *\n   * @param {Function} successHandler\n   * @param {Function} errorHandler\n   * @returns {Promise}\n   */\n  then(successHandler, errorHandler) {\n    this.promise = this.promise || this.send(this.body)\n\n    return this.promise.then(successHandler, errorHandler)\n  }\n\n  /**\n   * @param {Function} errorHandler\n   * @returns {Promise}\n   */\n  catch(errorHandler) {\n    this.promise = this.promise || this.send(this.body)\n\n    return this.promise.catch(errorHandler)\n  }\n}\n\nObject.defineProperty(Request, 'FormData', {\n  get() {\n    return typeof FormData !== 'undefined' ? FormData : require('form-data')\n  }\n})\n\nRequest.XMLHttpRequest = typeof XMLHttpRequest !== 'undefined' ? XMLHttpRequest : undefined\n\nRequest.send = (path, method, headers, body, encoding) => {\n  const sender = typeof Request.XMLHttpRequest !== 'undefined'\n    ? sendXmlHttpRequest\n    : sendNodeAPIRequest\n\n  return sender(path, method, headers, body, encoding)\n}\n\nRequest.verbose = false\nRequest.methods = ['get', 'post', 'put', 'patch', 'delete']\n\nRequest.methods.forEach(method => {\n  Request[method] = function(path, body) {\n    return new Request(path, method, body)\n  }\n})\n\nmodule.exports = Request\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const DEFAULT_TTL = 30000 // 30 sec\n\n/**\n * @typedef {Object} CacheItem\n * @property {*} value\n * @property {Array.<RegExp|String>} tags\n * @property {Number} ttl\n */\n\n/**\n * @param {*} value\n * @param {Array.<RegExp|String>}tags\n * @param {Number} ttl\n * @returns {CacheItem}\n */\nconst cacheItem = (value, tags, ttl) => ({ value, tags, ttl })\n\nconst currentTime = () => new Date().getTime()\n\n/**\n * Returns true if tag A matches tag B :\n *  - if they are non-strictly equal\n *  - if one of them is Regexp matching the opposite\n *\n * @param {String|RegExp} a\n * @param {String|RegExp} b\n * @returns {Boolean}\n */\nconst tagsMatches = (a, b) => {\n  let result = a == b // eslint-disable-line\n\n  if (!result && a instanceof RegExp) {\n    result = a.test(b)\n  }\n\n  if (!result && b instanceof RegExp) {\n    result = b.test(a)\n  }\n\n  return result\n}\n\n/**\n * Returns true if any of A tags matches any of B tags\n *\n * @param {Array.<String|RegExp>} a\n * @param {Array.<String|RegExp>} b\n * @returns {Boolean}\n */\nconst tagsContainMatches = (a, b) => {\n  return !!a.find(aTag => b.find(bTag => tagsMatches(aTag, bTag)))\n}\n\n\n/**\n * A Cache with TTL and optional tags for the keys\n * Makes it possible to assign multiple tags for a key and delete keys by tags\n * Optionally it starts flushing timer which cleans all outdated keys\n */\nexport default class Cache {\n\n  /**\n   * @param {Number?} flushInterval\n   */\n  constructor(flushInterval) {\n    this.flushInterval = flushInterval\n\n    /**\n     * @type {Map.<String, CacheItem>}\n     */\n    this.map = new Map()\n  }\n\n  /**\n   * @param {String} key\n   * @returns {*}\n   */\n  get(key) {\n    const cacheItem = this.map.get(key)\n\n    if (cacheItem) {\n      if (cacheItem.ttl > currentTime()) {\n        return cacheItem.value\n      } else {\n        this.map.delete(key)\n      }\n    }\n  }\n\n  /**\n   * @param {String} key\n   * @param {*} value\n   * @param {Array.<RegExp|String>=} tags\n   * @param {Number=} ttl\n   */\n  set(key, value, tags, ttl = DEFAULT_TTL) {\n    this.map.set(key, cacheItem(value, tags, currentTime() + ttl))\n\n    if (this.flushInterval && !this.flushTimer) {\n      this.flushTimer = setInterval(this.flush.bind(this), this.flushInterval)\n\n      if (this.flushTimer.unref) {\n        this.flushTimer.unref()\n      }\n    }\n  }\n\n  /**\n   * @param {String} key\n   */\n  delete(key) {\n    this.map.delete(key)\n  }\n\n  /**\n   * @param {Array.<String>} tags\n   */\n  deleteByTags(tags) {\n    for (const [key, value] of this.map) {\n      if (value.tags && tagsContainMatches(tags, value.tags)) {\n        this.delete(key)\n      }\n    }\n  }\n\n  /**\n   * Deletes all outdated keys\n   */\n  flush() {\n    const now = currentTime()\n\n    for (const [key, value] of this.map) {\n      if (value.ttl < now) {\n        this.delete(key)\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cache.js","\nexport default class EventEmitter {\n\n  constructor() {\n    this.events = {}\n  }\n\n  on(eventName, callback) {\n    this.events[eventName] = this.events[eventName] || []\n    this.events[eventName].push(callback)\n\n    return this\n  }\n\n  off(eventName, callback) {\n    if (!eventName) {\n      this.events = {}\n\n    } else if (this.events[eventName]) {\n      if (callback) {\n        this.events[eventName] = this.events[eventName].filter(c => c !== callback)\n      } else {\n        delete this.events[eventName]\n      }\n    }\n\n    return this\n  }\n\n  emit(eventName, ...args) {\n    if (this.events[eventName]) {\n      this.events[eventName].forEach(callback => callback(...args))\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/event-emitter.js","import { castArray } from './utils'\n\n/**\n * Produces a URL query string from a given obj by iterating through the object's \"own properties\".\n * @param {Object} obj\n * @returns {string}\n */\nexport const stringify = obj => {\n  const tokens = []\n\n  Object.keys(obj).forEach(key => {\n    const value = obj[key]\n\n    if (value !== undefined) {\n      castArray(value).forEach(value => {\n        tokens.push(`${ encodeURIComponent(key) }=${ encodeURIComponent(value) }`)\n      })\n    }\n  })\n\n  return tokens.join('&')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/qs.js","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"stream\"\n// module id = 6\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 7\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 8\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 9\n// module chunks = 0","throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use \"lib\" folder modules instead. For any questions please contact as at http://support.backendless.com/')\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"form-data\"\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}